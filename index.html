<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apex Legends ALC Settings Analyzer - Pro Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
            padding: 20px;
            font-weight: 500;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .main-container {
            max-width: 1800px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 600px 1fr;
            gap: 30px;
            flex: 1;
        }
        
        /* Footer Styles */
        .footer {
            background-color: #2a2a2a;
            padding: 20px;
            margin-top: 40px;
            border-radius: 10px;
            text-align: center;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(40, 40, 60, 0.2) 0%,
                rgba(80, 30, 30, 0.1) 25%,
                rgba(120, 40, 40, 0.05) 50%,
                rgba(40, 40, 120, 0.1) 75%,
                rgba(40, 40, 60, 0.2) 100%
            );
            pointer-events: none;
        }
        
        .footer-content {
            position: relative;
            z-index: 1;
            color: #999;
            font-size: 14px;
            font-weight: 500;
        }
        
        .reddit-link {
            position: relative;
            z-index: 1;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background-color: #FF4500;
            border-radius: 50%;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .reddit-link:hover {
            background-color: #FF5722;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 69, 0, 0.4);
        }
        
        .reddit-icon {
            width: 20px;
            height: 20px;
            fill: white;
        }
        
        /* Left Panel - Settings */
        .settings-panel {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .settings-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(40, 40, 60, 0.2) 0%,
                rgba(80, 30, 30, 0.1) 25%,
                rgba(120, 40, 40, 0.05) 50%,
                rgba(40, 40, 120, 0.1) 75%,
                rgba(40, 40, 60, 0.2) 100%
            );
            pointer-events: none;
        }
        
        .settings-panel > * {
            position: relative;
            z-index: 1;
        }
        
        /* Settings Row Styles */
        .setting-row {
            background-color: #4a4a4a;
            height: 50px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        /* Gradient overlay for the 3D effect */
        .setting-row::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.8) 0%,
                rgba(80, 30, 30, 0.4) 20%,
                rgba(120, 40, 40, 0.2) 40%,
                rgba(40, 40, 120, 0.3) 60%,
                rgba(80, 30, 30, 0.4) 80%,
                rgba(40, 40, 60, 0.8) 100%
            );
            pointer-events: none;
        }
        
        /* Label */
        .setting-label {
            position: relative;
            z-index: 2;
            width: 200px;
            padding-left: 15px;
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        /* Slider container */
        .slider-container {
            flex: 1;
            height: 100%;
            position: relative;
            margin-right: 60px;
        }
        
        /* Hidden range input */
        .slider-input {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 4;
        }
        
        /* White fill bar */
        .slider-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            transition: width 0.1s ease;
            z-index: 1;
        }
        
        /* Orange indicator line */
        .slider-indicator {
            position: absolute;
            width: 3px;
            height: 100%;
            background-color: #ff6b00;
            top: 0;
            transition: left 0.1s ease;
            z-index: 3;
            box-shadow: 0 0 8px rgba(255, 107, 0, 0.8);
        }
        
        /* Gray vertical separator line */
        .slider-separator {
            position: absolute;
            width: 2px;
            height: 100%;
            background-color: #666;
            top: 0;
            z-index: 2;
        }
        
        /* Value display */
        .setting-value {
            position: absolute;
            right: 15px;
            font-size: 18px;
            font-weight: 600;
            z-index: 2;
            min-width: 50px;
            text-align: right;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        /* Section headers */
        .section-header {
            background-color: #3a3a3a;
            height: 40px;
            margin: 15px 0 6px 0;
            display: flex;
            align-items: center;
            padding-left: 15px;
            font-size: 16px;
            color: #ccc;
        }
        
        /* Tab buttons */
        .tab-container {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .tab-button {
            background-color: #3a3a3a;
            border: none;
            padding: 10px 25px;
            color: #999;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            border-radius: 5px;
        }
        
        .tab-button.active {
            background-color: #ff6b00;
            color: white;
        }
        
        .tab-button:hover:not(.active) {
            background-color: #4a4a4a;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Right Panel - Visualizations */
        .viz-panel {
            background-color: #4a4a4a;
            padding: 20px;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .viz-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.8) 0%,
                rgba(80, 30, 30, 0.4) 20%,
                rgba(120, 40, 40, 0.2) 40%,
                rgba(40, 40, 120, 0.3) 60%,
                rgba(80, 30, 30, 0.4) 80%,
                rgba(40, 40, 60, 0.8) 100%
            );
            pointer-events: none;
        }
        
        /* Visualization tabs */
        .viz-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            background-color: transparent;
            padding: 0;
            border-radius: 0;
        }
        
        .viz-tab {
            padding: 8px 20px;
            background-color: #3a3a3a;
            color: #999;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }
        
        .viz-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.6) 0%,
                rgba(80, 30, 30, 0.3) 50%,
                rgba(40, 40, 60, 0.6) 100%
            );
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        
        .viz-tab:hover::before {
            opacity: 1;
        }
        
        .viz-tab.active {
            background-color: #ff6b00;
            color: white;
        }
        
        .viz-content {
            display: none;
        }
        
        .viz-content.active {
            display: block;
        }
        
        /* Canvas styling */
        .canvas-container {
            background-color: #5a5a5a;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .canvas-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.7) 0%,
                rgba(80, 30, 30, 0.35) 20%,
                rgba(120, 40, 40, 0.2) 40%,
                rgba(40, 40, 120, 0.3) 60%,
                rgba(80, 30, 30, 0.35) 80%,
                rgba(40, 40, 60, 0.7) 100%
            );
            pointer-events: none;
        }
        
        canvas {
            display: block;
            margin: 0 auto;
            background-color: #3a3a3a;
            border-radius: 4px;
            position: relative;
            z-index: 1;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        /* Info boxes */
        .info-box {
            background-color: #4a4a4a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid #ff6b00;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .info-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(255, 107, 0, 0.15) 0%,
                rgba(80, 30, 30, 0.1) 20%,
                rgba(40, 40, 60, 0.15) 50%,
                rgba(40, 40, 120, 0.1) 80%,
                rgba(40, 40, 60, 0.15) 100%
            );
            pointer-events: none;
        }
        
        .info-box h3 {
            color: #ff6b00;
            margin-bottom: 10px;
            font-size: 16px;
            position: relative;
            z-index: 1;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .info-box p {
            font-size: 14px;
            line-height: 1.6;
            margin: 5px 0;
            position: relative;
            z-index: 1;
            color: #e0e0e0;
        }
        
        /* Stats grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stat-box {
            background-color: #5a5a5a;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .stat-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.6) 0%,
                rgba(255, 107, 0, 0.1) 20%,
                rgba(120, 40, 40, 0.15) 50%,
                rgba(40, 40, 120, 0.2) 80%,
                rgba(40, 40, 60, 0.6) 100%
            );
            pointer-events: none;
        }
        
        .stat-label {
            font-size: 12px;
            color: #bbb;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-value {
            font-size: 24px;
            color: #ff6b00;
            font-weight: bold;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(255, 107, 0, 0.3);
        }
        
        /* Action buttons */
        .action-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .action-button {
            background-color: #ff6b00;
            border: none;
            padding: 10px 20px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            border-radius: 5px;
        }
        
        .action-button:hover {
            background-color: #ff8c2a;
            transform: translateY(-2px);
        }
        
        /* Preset selector */
        .preset-container {
            margin-bottom: 15px;
        }
        
        .preset-select {
            background-color: #3a3a3a;
            border: 2px solid #555;
            color: white;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
            width: 100%;
            border-radius: 5px;
        }
        
        .preset-select option {
            background-color: #2a2a2a;
        }
        
        /* Warning system */
        .warning {
            padding: 6px 10px;
            border-radius: 4px;
            margin-top: 4px;
            font-size: 12px;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }
        
        .warning::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.3) 0%,
                rgba(80, 30, 30, 0.1) 50%,
                rgba(40, 40, 60, 0.3) 100%
            );
            pointer-events: none;
        }
        
        .warning-red {
            background-color: rgba(80, 30, 30, 0.5);
            border: 1px solid rgba(255, 51, 51, 0.5);
            color: #ff6666;
        }
        
        .warning-yellow {
            background-color: rgba(80, 60, 20, 0.5);
            border: 1px solid rgba(255, 170, 0, 0.5);
            color: #ffcc00;
        }
        
        .warning-green {
            background-color: rgba(30, 80, 30, 0.5);
            border: 1px solid rgba(0, 255, 51, 0.5);
            color: #00ff66;
        }
        
        /* Comparison bars */
        .comparison-bar {
            height: 20px;
            background-color: #3a3a3a;
            border-radius: 10px;
            overflow: hidden;
            margin: 5px 0;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .comparison-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.5) 0%,
                rgba(80, 30, 30, 0.2) 50%,
                rgba(40, 40, 60, 0.5) 100%
            );
            pointer-events: none;
        }
        
        .comparison-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b00, #ff9944);
            transition: width 0.3s;
            position: relative;
            box-shadow: 0 0 10px rgba(255, 107, 0, 0.5);
        }
        
        .comparison-label {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .viz-panel h2, .viz-panel h3, .viz-panel > * {
            position: relative;
            z-index: 1;
        }
        
        .analysis-panel h2, .analysis-panel > * {
            position: relative;
            z-index: 1;
        }
        .analysis-panel {
            grid-column: 1 / -1;
            background-color: #4a4a4a;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .analysis-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(40, 40, 60, 0.8) 0%,
                rgba(80, 30, 30, 0.4) 20%,
                rgba(120, 40, 40, 0.2) 40%,
                rgba(40, 40, 120, 0.3) 60%,
                rgba(80, 30, 30, 0.4) 80%,
                rgba(40, 40, 60, 0.8) 100%
            );
            pointer-events: none;
        }
        
        .viz-panel h2, .viz-panel h3, .viz-panel > * {
            position: relative;
            z-index: 1;
        }
        
        .analysis-panel h2, .analysis-panel > * {
            position: relative;
            z-index: 1;
        }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .analysis-panel {
                grid-column: 1;
            }
        }
        
        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            font-size: 12px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 15px;
            border-radius: 3px;
            border: 1px solid #555;
        }
        
        /* Pro tip styling */
        .pro-tip {
            background-color: #5a5a5a;
            border: none;
            padding: 12px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 13px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .pro-tip::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, 
                rgba(255, 107, 0, 0.2) 0%,
                rgba(80, 30, 30, 0.1) 20%,
                rgba(40, 40, 60, 0.15) 50%,
                rgba(40, 40, 120, 0.1) 80%,
                transparent 100%
            );
            pointer-events: none;
        }
        
        .pro-tip-title {
            color: #ff6b00;
            font-weight: bold;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .pro-tip p {
            position: relative;
            z-index: 1;
            color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Settings Panel -->
        <div class="settings-panel">
            <h2 style="color: #ff6b00; margin-bottom: 15px;">ALC Settings</h2>
            
            <div class="preset-container">
                <select class="preset-select" id="presets">
                    <option value="custom">Custom Settings</option>
                    <option value="default">Default</option>
                    <option value="genburten">Genburten</option>
                    <option value="extesyy">Extesyy</option>
                </select>
            </div>

            <div class="tab-container">
                <button class="tab-button active" onclick="switchTab('hipfire')">Hip Fire</button>
                <button class="tab-button" onclick="switchTab('ads')">ADS</button>
            </div>

            <!-- Hip Fire Settings -->
            <div id="hipfire-tab" class="tab-content active">
                <!-- Deadzone Settings -->
                <div class="setting-row">
                    <div class="setting-label">Deadzone</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="deadzone" min="0" max="50" value="15" step="1">
                        <div class="slider-fill" id="deadzoneFill"></div>
                        <div class="slider-indicator" id="deadzoneIndicator"></div>
                    </div>
                    <div class="setting-value" id="deadzoneValue">15%</div>
                </div>
                <div id="deadzoneWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">Outer Threshold</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="outerThreshold" min="0" max="30" value="2" step="1">
                        <div class="slider-fill" id="outerThresholdFill"></div>
                        <div class="slider-indicator" id="outerThresholdIndicator"></div>
                    </div>
                    <div class="setting-value" id="outerThresholdValue">2%</div>
                </div>
                <div id="outerThresholdWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">Response Curve</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="responseCurve" min="0" max="30" value="10" step="1">
                        <div class="slider-fill" id="responseCurveFill"></div>
                        <div class="slider-indicator" id="responseCurveIndicator"></div>
                        <div class="slider-separator" id="responseCurveSeparator" style="left: 33.33%"></div>
                    </div>
                    <div class="setting-value" id="responseCurveValue">10</div>
                </div>

                <div class="section-header">Per Optic Settings...</div>

                <div class="setting-row">
                    <div class="setting-label">Yaw Speed</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="yawSpeed" min="0" max="500" value="160" step="1">
                        <div class="slider-fill" id="yawSpeedFill"></div>
                        <div class="slider-indicator" id="yawSpeedIndicator"></div>
                    </div>
                    <div class="setting-value" id="yawSpeedValue">160</div>
                </div>
                <div id="hipYawWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">Pitch Speed</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="pitchSpeed" min="0" max="500" value="120" step="1">
                        <div class="slider-fill" id="pitchSpeedFill"></div>
                        <div class="slider-indicator" id="pitchSpeedIndicator"></div>
                    </div>
                    <div class="setting-value" id="pitchSpeedValue">120</div>
                </div>
                <div id="hipPitchWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">Turning Extra Yaw</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="extraYaw" min="0" max="250" value="220" step="1">
                        <div class="slider-fill" id="extraYawFill"></div>
                        <div class="slider-indicator" id="extraYawIndicator"></div>
                    </div>
                    <div class="setting-value" id="extraYawValue">220</div>
                </div>

                <div class="setting-row">
                    <div class="setting-label">Turning Extra Pitch</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="extraPitch" min="0" max="250" value="0" step="1">
                        <div class="slider-fill" id="extraPitchFill"></div>
                        <div class="slider-indicator" id="extraPitchIndicator"></div>
                    </div>
                    <div class="setting-value" id="extraPitchValue">0</div>
                </div>

                <div class="setting-row">
                    <div class="setting-label">Turning Ramp-up Time</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="rampTime" min="0" max="100" value="33" step="1">
                        <div class="slider-fill" id="rampTimeFill"></div>
                        <div class="slider-indicator" id="rampTimeIndicator"></div>
                        <div class="slider-separator" id="rampTimeSeparator" style="left: 40%"></div>
                    </div>
                    <div class="setting-value" id="rampTimeValue">33%</div>
                </div>
                <div id="hipRampWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">Turning Ramp-up Delay</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="rampDelay" min="0" max="100" value="0" step="1">
                        <div class="slider-fill" id="rampDelayFill"></div>
                        <div class="slider-indicator" id="rampDelayIndicator"></div>
                    </div>
                    <div class="setting-value" id="rampDelayValue">0%</div>
                </div>
            </div>

            <!-- ADS Settings -->
            <div id="ads-tab" class="tab-content">
                <div class="setting-row">
                    <div class="setting-label">ADS Yaw Speed</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="adsYawSpeed" min="0" max="500" value="110" step="1">
                        <div class="slider-fill" id="adsYawSpeedFill"></div>
                        <div class="slider-indicator" id="adsYawSpeedIndicator"></div>
                    </div>
                    <div class="setting-value" id="adsYawSpeedValue">110</div>
                </div>
                <div id="adsYawWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">ADS Pitch Speed</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="adsPitchSpeed" min="0" max="500" value="75" step="1">
                        <div class="slider-fill" id="adsPitchSpeedFill"></div>
                        <div class="slider-indicator" id="adsPitchSpeedIndicator"></div>
                    </div>
                    <div class="setting-value" id="adsPitchSpeedValue">75</div>
                </div>
                <div id="adsPitchWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">ADS Turning Extra Yaw</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="adsExtraYaw" min="0" max="250" value="30" step="1">
                        <div class="slider-fill" id="adsExtraYawFill"></div>
                        <div class="slider-indicator" id="adsExtraYawIndicator"></div>
                    </div>
                    <div class="setting-value" id="adsExtraYawValue">30</div>
                </div>

                <div class="setting-row">
                    <div class="setting-label">ADS Turning Extra Pitch</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="adsExtraPitch" min="0" max="250" value="30" step="1">
                        <div class="slider-fill" id="adsExtraPitchFill"></div>
                        <div class="slider-indicator" id="adsExtraPitchIndicator"></div>
                    </div>
                    <div class="setting-value" id="adsExtraPitchValue">30</div>
                </div>

                <div class="setting-row">
                    <div class="setting-label">ADS Turning Ramp-up Time</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="adsRampTime" min="0" max="100" value="100" step="1">
                        <div class="slider-fill" id="adsRampTimeFill"></div>
                        <div class="slider-indicator" id="adsRampTimeIndicator"></div>
                        <div class="slider-separator" id="adsRampTimeSeparator" style="left: 40%"></div>
                    </div>
                    <div class="setting-value" id="adsRampTimeValue">100%</div>
                </div>
                <div id="adsRampWarning"></div>

                <div class="setting-row">
                    <div class="setting-label">ADS Turning Ramp-up Delay</div>
                    <div class="slider-container">
                        <input type="range" class="slider-input" id="adsRampDelay" min="0" max="100" value="25" step="1">
                        <div class="slider-fill" id="adsRampDelayFill"></div>
                        <div class="slider-indicator" id="adsRampDelayIndicator"></div>
                    </div>
                    <div class="setting-value" id="adsRampDelayValue">25%</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-button" onclick="resetSettings()">Reset to Default</button>
                <button class="action-button" onclick="exportSettings()">Export</button>
                <button class="action-button" onclick="importSettings()">Import</button>
            </div>
        </div>

        <!-- Visualization Panel -->
        <div class="viz-panel">
            <h2 style="color: #ff6b00; margin-bottom: 15px;">Visualizations & Analysis</h2>
            
            <div class="viz-tabs">
                <button class="viz-tab active" onclick="switchVizTab('core')">Core</button>
                <button class="viz-tab" onclick="switchVizTab('movement')">Movement</button>
                <button class="viz-tab" onclick="switchVizTab('aimassist')">Aim Assist</button>
                <button class="viz-tab" onclick="switchVizTab('metrics')">Metrics</button>
            </div>

            <!-- Core Visualizations -->
            <div id="core-viz" class="viz-content active">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h3 style="color: #ff6b00; margin-bottom: 10px; font-size: 16px;">Deadzone Map</h3>
                        <div class="canvas-container">
                            <canvas id="deadzoneCanvas" width="280" height="280"></canvas>
                        </div>
                        <div class="legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: rgba(120, 40, 40, 0.4);"></div>
                                <span>Deadzone</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: rgba(255, 255, 255, 0.1);"></div>
                                <span>Active</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: rgba(255, 107, 0, 0.15);"></div>
                                <span>Outer</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="color: #ff6b00; margin-bottom: 10px; font-size: 16px;">Response Curve</h3>
                        <div class="canvas-container">
                            <canvas id="curveCanvas" width="280" height="280"></canvas>
                        </div>
                        <p style="text-align: center; margin-top: 10px; font-size: 12px; color: #999;">
                            Input vs Output - Shows acceleration
                        </p>
                    </div>
                </div>
            </div>

            <!-- Movement Visualizations -->
            <div id="movement-viz" class="viz-content">
                <div>
                    <h3 style="color: #ff6b00; margin-bottom: 10px; font-size: 16px;">Strafe Tracking Analysis</h3>
                    <div class="canvas-container">
                        <canvas id="strafeCanvas" width="600" height="300"></canvas>
                    </div>
                    <div id="strafeStatusBox" style="display: none; background-color: #2a2a2a; padding: 15px; border-radius: 8px; margin-top: 15px; border: 2px solid #444; text-align: center;">
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <h3 style="color: #ff6b00; margin-bottom: 10px; font-size: 16px;">Diagonal Uniformity</h3>
                    <div class="canvas-container">
                        <canvas id="diagonalCanvas" width="600" height="250"></canvas>
                    </div>
                    <div id="diagonalAnalysis" style="background-color: #3a3a3a; padding: 15px; border-radius: 8px; margin-top: 15px; border: 2px solid #555;">
                        <div id="uniformityStatus" style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Loading...</div>
                        <p id="uniformityText">Analyzing diagonal movement...</p>
                    </div>
                </div>
            </div>

            <!-- Aim Assist Visualizations -->
            <div id="aimassist-viz" class="viz-content">
                <div>
                    <h3 style="color: #ff6b00; margin-bottom: 10px; font-size: 16px;">Aim Assist Behavior (0.3 PC Controller)</h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px; align-items: center;">
                        <span>View Mode:</span>
                        <button class="action-button active" onclick="setAAMode('hipfire')" style="padding: 5px 15px;">Hip Fire</button>
                        <button class="action-button" onclick="setAAMode('ads')" style="padding: 5px 15px; background-color: #555;">ADS</button>
                    </div>
                    <div class="canvas-container">
                        <canvas id="aimAssistCanvas" width="600" height="300"></canvas>
                    </div>
                    <div class="info-box">
                        <h3>Aim Assist Mechanics</h3>
                        <div id="aaInfoContent">
                            <p>• <strong>Hip Fire Range:</strong> 3m to 33m (No AA under 3m or over 33m)</p>
                            <p>• <strong>AA Strength:</strong> 30% relative position maintenance within AA bubble</p>
                            <p>• <strong>Bubble Size:</strong> Scales with enemy distance (smaller at range)</p>
                            <p>• <strong>No Direct Assistance:</strong> No recoil control or bullet drop compensation</p>
                            <p>• Lower response curves provide smoother tracking within AA bubble</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Metrics Visualizations -->
            <div id="metrics-viz" class="viz-content">
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">Hip 180° Time</div>
                        <div class="stat-value" id="hip180Time">0.00s</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Hip 180° w/ Extra</div>
                        <div class="stat-value" id="hip180TimeExtra">0.00s</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">ADS 180° Time</div>
                        <div class="stat-value" id="ads180Time">0.00s</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">ADS 180° w/ Extra</div>
                        <div class="stat-value" id="ads180TimeExtra">0.00s</div>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 20px;">
                    <h3>Speed Breakdown</h3>
                    <p>Hip Fire Base: <span id="hipBaseSpeed" style="color: #ff6b00;">160°/s</span></p>
                    <p>Hip Fire Max: <span id="hipMaxSpeed" style="color: #ff6b00;">380°/s</span></p>
                    <p>ADS Base: <span id="adsBaseSpeed" style="color: #ff6b00;">110°/s</span></p>
                    <p>ADS Max: <span id="adsMaxSpeed" style="color: #ff6b00;">140°/s</span></p>
                </div>

                <div style="margin-top: 20px;">
                    <h3 style="color: #ff6b00; margin-bottom: 10px; font-size: 16px;">Effective Speed Comparison</h3>
                    <div class="canvas-container">
                        <canvas id="speedComparisonCanvas" width="600" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Panel -->
        <div class="analysis-panel">
            <h2 style="color: #ff6b00; margin-bottom: 20px;">Analysis & Pro Tips</h2>
            
            <div class="analysis-grid">
                <div class="info-box">
                    <h3>Current Settings Analysis</h3>
                    <div id="analysisText">Loading analysis...</div>
                </div>

                <div class="info-box">
                    <h3>Diagonal Uniformity Score</h3>
                    <div id="diagonalUniformity">
                        <p>Hip Fire Uniformity:</p>
                        <div class="comparison-bar">
                            <div class="comparison-fill" id="hipUniformityBar" style="width: 75%"></div>
                            <span class="comparison-label" id="hipUniformityLabel">75%</span>
                        </div>
                        <p style="margin-top: 10px;">ADS Uniformity:</p>
                        <div class="comparison-bar">
                            <div class="comparison-fill" id="adsUniformityBar" style="width: 68%"></div>
                            <span class="comparison-label" id="adsUniformityLabel">68%</span>
                        </div>
                        <p style="margin-top: 10px; font-size: 12px; color: #999;">Pro players maintain 80-100% for consistent diagonal tracking</p>
                    </div>
                </div>

                <div class="info-box">
                    <h3>Micro-adjustment Capability</h3>
                    <div id="microAdjustment">
                        <p>Deadzone Impact:</p>
                        <div class="comparison-bar">
                            <div class="comparison-fill" id="microBar" style="width: 50%"></div>
                            <span class="comparison-label" id="microLabel">50%</span>
                        </div>
                        <p id="microText" style="margin-top: 10px; font-size: 12px; color: #999;">Lower deadzone = better micro-adjustments</p>
                    </div>
                </div>

                <div>
                    <div class="pro-tip">
                        <div class="pro-tip-title">💡 Hidden Decimals</div>
                        <p>Manually clicking values in-game (instead of D-pad) adds hidden decimals that persist. Set to 0 or edit config to remove them.</p>
                    </div>

                    <div class="pro-tip">
                        <div class="pro-tip-title">🎯 Why Lower Deadzone?</div>
                        <p>Smaller deadzone = more precision with less stick movement. Stick drift doesn't impact aim - it only causes visual movement when not aiming.</p>
                    </div>

                    <div class="pro-tip">
                        <div class="pro-tip-title">📈 Linear vs Classic</div>
                        <p><strong>Linear (0):</strong> 1:1 input, best for recoil control & consistency. Higher skill ceiling.<br>
                        <strong>Classic (10):</strong> More forgiving, easier to handle, but less precise.</p>
                    </div>

                    <div class="pro-tip">
                        <div class="pro-tip-title">⚡ Turning Extra Secret</div>
                        <p>Only activates at 100% stick deflection AND outside aim assist range. Disabled in AA bubble for consistency.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <span class="footer-content">by Vivid Nightmare</span>
        <a href="https://www.reddit.com/user/VividNightmare_/" target="_blank" class="reddit-link" title="Reddit Profile">
            <svg class="reddit-icon" viewBox="0 0 24 24">
                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
            </svg>
        </a>
    </footer>

    <script>
        // Setting configurations
        const settings = [
            'deadzone', 'outerThreshold', 'responseCurve', 'yawSpeed', 'pitchSpeed',
            'extraYaw', 'extraPitch', 'rampTime', 'rampDelay',
            'adsYawSpeed', 'adsPitchSpeed', 'adsExtraYaw', 'adsExtraPitch',
            'adsRampTime', 'adsRampDelay'
        ];

        // Settings that show percentage
        const percentageSettings = ['deadzone', 'outerThreshold', 'rampTime', 'rampDelay', 'adsRampTime', 'adsRampDelay'];

        // Preset configurations
        const presets = {
            default: {
                deadzone: 15,
                outerThreshold: 2,
                responseCurve: 10,
                yawSpeed: 160,
                pitchSpeed: 120,
                extraYaw: 220,
                extraPitch: 0,
                rampTime: 33,
                rampDelay: 0,
                adsYawSpeed: 110,
                adsPitchSpeed: 75,
                adsExtraYaw: 30,
                adsExtraPitch: 30,
                adsRampTime: 100,
                adsRampDelay: 25
            },
            genburten: {
                deadzone: 0,
                outerThreshold: 2,
                responseCurve: 0,
                yawSpeed: 500,
                pitchSpeed: 500,
                extraYaw: 0,
                extraPitch: 0,
                rampTime: 0,
                rampDelay: 0,
                adsYawSpeed: 130,
                adsPitchSpeed: 130,
                adsExtraYaw: 0,
                adsExtraPitch: 0,
                adsRampTime: 0,
                adsRampDelay: 0
            },
            extesyy: {
                deadzone: 0,
                outerThreshold: 2,
                responseCurve: 1,
                yawSpeed: 350,
                pitchSpeed: 320,
                extraYaw: 0,
                extraPitch: 0,
                rampTime: 0,
                rampDelay: 0,
                adsYawSpeed: 110,
                adsPitchSpeed: 110,
                adsExtraYaw: 0,
                adsExtraPitch: 0,
                adsRampTime: 0,
                adsRampDelay: 0
            }
        };

        // Canvas contexts
        const deadzoneCanvas = document.getElementById('deadzoneCanvas');
        const deadzoneCtx = deadzoneCanvas.getContext('2d');
        const curveCanvas = document.getElementById('curveCanvas');
        const curveCtx = curveCanvas.getContext('2d');
        const strafeCanvas = document.getElementById('strafeCanvas');
        const strafeCtx = strafeCanvas.getContext('2d');
        const diagonalCanvas = document.getElementById('diagonalCanvas');
        const diagonalCtx = diagonalCanvas.getContext('2d');
        const aimAssistCanvas = document.getElementById('aimAssistCanvas');
        const aimAssistCtx = aimAssistCanvas.getContext('2d');
        const speedComparisonCanvas = document.getElementById('speedComparisonCanvas');
        const speedComparisonCtx = speedComparisonCanvas.getContext('2d');

        let aaViewMode = 'hipfire';

        // Update slider visual elements
        function updateSlider(settingName) {
            const slider = document.getElementById(settingName);
            const fill = document.getElementById(settingName + 'Fill');
            const indicator = document.getElementById(settingName + 'Indicator');
            const valueDisplay = document.getElementById(settingName + 'Value');
            
            const value = slider.value;
            const max = slider.max;
            const percentage = (value / max) * 100;
            
            // Update fill width and indicator position
            fill.style.width = percentage + '%';
            indicator.style.left = percentage + '%';
            
            // Update value display
            if (percentageSettings.includes(settingName)) {
                valueDisplay.textContent = value + '%';
            } else {
                valueDisplay.textContent = value;
            }
        }

        // Initialize all sliders
        settings.forEach(setting => {
            const slider = document.getElementById(setting);
            if (slider) {
                // Update on input
                slider.addEventListener('input', () => {
                    updateSlider(setting);
                    updateWarnings();
                    updateVisualizations();
                    updateAnalysis();
                    updateStats();
                });
                // Initial update
                updateSlider(setting);
            }
        });

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            if (tab === 'hipfire') {
                document.querySelector('.tab-button:first-child').classList.add('active');
                document.getElementById('hipfire-tab').classList.add('active');
            } else {
                document.querySelector('.tab-button:last-child').classList.add('active');
                document.getElementById('ads-tab').classList.add('active');
            }
        }

        function switchVizTab(tab) {
            document.querySelectorAll('.viz-tab').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.viz-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`.viz-tab:nth-child(${['core', 'movement', 'aimassist', 'metrics'].indexOf(tab) + 1})`).classList.add('active');
            document.getElementById(`${tab}-viz`).classList.add('active');
        }

        function setAAMode(mode) {
            aaViewMode = mode;
            document.querySelectorAll('.action-button').forEach(btn => {
                if (btn.textContent === 'Hip Fire' || btn.textContent === 'ADS') {
                    btn.style.backgroundColor = '#555';
                }
            });
            event.target.style.backgroundColor = '#ff6b00';
            
            const infoContent = document.getElementById('aaInfoContent');
            if (mode === 'hipfire') {
                infoContent.innerHTML = `
                    <p>• <strong>Hip Fire Range:</strong> 3m to 33m (No AA under 3m or over 33m)</p>
                    <p>• <strong>AA Strength:</strong> 30% relative position maintenance within AA bubble</p>
                    <p>• <strong>Bubble Size:</strong> Scales with enemy distance (smaller at range)</p>
                    <p>• <strong>No Direct Assistance:</strong> No recoil control or bullet drop compensation</p>
                    <p>• Lower response curves provide smoother tracking within AA bubble</p>
                `;
            } else {
                infoContent.innerHTML = `
                    <p>• <strong>ADS Range:</strong> No technical limit (practical limit based on bubble size)</p>
                    <p>• <strong>AA Strength:</strong> 30% relative position maintenance within AA bubble</p>
                    <p>• <strong>Bubble Scaling:</strong> Decreases with distance, increases with optic magnification</p>
                    <p>• <strong>Magnification Effect:</strong> Higher zoom = larger on-screen bubble = more effective AA</p>
                    <p>• <strong>Limitations:</strong> No recoil control, no bullet drop/velocity compensation</p>
                `;
            }
            
            drawAimAssist();
        }

        // Preset handling
        document.getElementById('presets').addEventListener('change', (e) => {
            if (e.target.value !== 'custom') {
                const preset = presets[e.target.value];
                Object.keys(preset).forEach(key => {
                    const slider = document.getElementById(key);
                    if (slider) {
                        slider.value = preset[key];
                        updateSlider(key);
                    }
                });
                updateWarnings();
                updateVisualizations();
                updateAnalysis();
                updateStats();
            }
        });

        // Warning system
        function updateWarnings() {
            // Hip fire yaw warnings
            const hipYaw = parseInt(document.getElementById('yawSpeed').value);
            const hipPitch = parseInt(document.getElementById('pitchSpeed').value);
            const hipYawWarning = document.getElementById('hipYawWarning');
            const hipPitchWarning = document.getElementById('hipPitchWarning');
            
            hipYawWarning.innerHTML = '';
            hipPitchWarning.innerHTML = '';
            
            if (hipYaw < 90) {
                hipYawWarning.innerHTML = '<div class="warning warning-red">⚠️ Below 90°/s - Cannot track close range strafes at 3m</div>';
            } else if (hipYaw < 130) {
                hipYawWarning.innerHTML = '<div class="warning warning-yellow">⚡ Minimum viable - limited strafe tracking</div>';
            } else if (hipYaw > 180) {
                hipYawWarning.innerHTML = '<div class="warning warning-yellow">⚠️ Exceeding 180°/s - Extra speed may be hard to control</div>';
            } else {
                hipYawWarning.innerHTML = '<div class="warning warning-green">✓ Good for close range tracking</div>';
            }
            
            if (hipPitch <= 49) {
                hipPitchWarning.innerHTML = '<div class="warning warning-red">⚠️ Below 50°/s - Cannot track close range vertical movement</div>';
            } else if (hipPitch >= 50 && hipPitch <= 59) {
                hipPitchWarning.innerHTML = '<div class="warning warning-yellow">⚡ Minimum viable - limited vertical tracking</div>';
            } else if (hipPitch > 180) {
                hipPitchWarning.innerHTML = '<div class="warning warning-yellow">⚠️ Exceeding 180°/s - Extra speed may be hard to control</div>';
            } else {
                hipPitchWarning.innerHTML = '<div class="warning warning-green">✓ Good vertical tracking</div>';
            }
            
            // ADS warnings
            const adsYaw = parseInt(document.getElementById('adsYawSpeed').value);
            const adsPitch = parseInt(document.getElementById('adsPitchSpeed').value);
            const adsYawWarning = document.getElementById('adsYawWarning');
            const adsPitchWarning = document.getElementById('adsPitchWarning');
            
            adsYawWarning.innerHTML = '';
            adsPitchWarning.innerHTML = '';
            
            if (adsYaw < 45) {
                adsYawWarning.innerHTML = '<div class="warning warning-red">⚠️ Below 45°/s - Cannot track basic movement</div>';
            } else if (adsYaw < 75) {
                adsYawWarning.innerHTML = '<div class="warning warning-yellow">⚡ Minimum viable for tracking</div>';
            } else if (adsYaw > 120) {
                adsYawWarning.innerHTML = '<div class="warning warning-yellow">⚠️ Exceeding 120°/s - May be too fast for ADS precision</div>';
            } else {
                adsYawWarning.innerHTML = '<div class="warning warning-green">✓ Good tracking potential</div>';
            }
            
            if (adsPitch < 45) {
                adsPitchWarning.innerHTML = '<div class="warning warning-red">⚠️ Below 45°/s - Cannot track basic movement</div>';
            } else if (adsPitch < 75) {
                adsPitchWarning.innerHTML = '<div class="warning warning-yellow">⚡ Minimum viable for tracking</div>';
            } else if (adsPitch > 120) {
                adsPitchWarning.innerHTML = '<div class="warning warning-yellow">⚠️ Exceeding 120°/s - May be too fast for ADS precision</div>';
            } else {
                adsPitchWarning.innerHTML = '<div class="warning warning-green">✓ Good tracking potential</div>';
            }
            
            // Outer threshold warning
            const outerWarning = document.getElementById('outerThresholdWarning');
            outerWarning.innerHTML = '';
            
            if (document.getElementById('outerThreshold').value < 2) {
                outerWarning.innerHTML = '<div class="warning warning-red">⚠️ ALPS controllers need minimum 2% to avoid edge detection issues</div>';
            }
        }

        // Calculate uniformity
        function calculateUniformity(yaw, pitch) {
            const min = Math.min(yaw, pitch);
            const max = Math.max(yaw, pitch);
            return max > 0 ? (min / max * 100) : 100;
        }

        // Update diagonal uniformity
        function updateDiagonalUniformity() {
            const hipYaw = parseInt(document.getElementById('yawSpeed').value);
            const hipPitch = parseInt(document.getElementById('pitchSpeed').value);
            const adsYaw = parseInt(document.getElementById('adsYawSpeed').value);
            const adsPitch = parseInt(document.getElementById('adsPitchSpeed').value);
            
            const hipUniformity = calculateUniformity(hipYaw, hipPitch);
            const adsUniformity = calculateUniformity(adsYaw, adsPitch);
            
            document.getElementById('hipUniformityBar').style.width = hipUniformity + '%';
            document.getElementById('hipUniformityLabel').textContent = Math.round(hipUniformity) + '%';
            document.getElementById('adsUniformityBar').style.width = adsUniformity + '%';
            document.getElementById('adsUniformityLabel').textContent = Math.round(adsUniformity) + '%';
            
            const worstUniformity = Math.min(hipUniformity, adsUniformity);
            const statusEl = document.getElementById('uniformityStatus');
            const textEl = document.getElementById('uniformityText');
            
            if (worstUniformity >= 80) {
                statusEl.style.color = '#ff6b00';
                statusEl.textContent = '✓ Excellent Diagonal Uniformity';
                textEl.textContent = 'Your diagonal movement will feel consistent and predictable. Pro-level settings!';
            } else if (worstUniformity >= 60) {
                statusEl.style.color = '#ffcc00';
                statusEl.textContent = '⚡ Acceptable Diagonal Uniformity';
                textEl.textContent = 'Some diagonal inconsistency. Consider matching yaw/pitch closer for better feel.';
            } else {
                statusEl.style.color = '#ff6666';
                statusEl.textContent = '⚠️ Poor Diagonal Uniformity';
                textEl.textContent = 'Diagonal tracking will feel very inconsistent! Match yaw and pitch speeds.';
            }
        }

        // Update stats
        function updateStats() {
            const hipYaw = parseInt(document.getElementById('yawSpeed').value);
            const hipYawExtra = parseInt(document.getElementById('yawSpeed').value) + parseInt(document.getElementById('extraYaw').value);
            const adsYaw = parseInt(document.getElementById('adsYawSpeed').value);
            const adsYawExtra = parseInt(document.getElementById('adsYawSpeed').value) + parseInt(document.getElementById('adsExtraYaw').value);
            
            document.getElementById('hip180Time').textContent = (180 / hipYaw).toFixed(2) + 's';
            document.getElementById('hip180TimeExtra').textContent = (180 / hipYawExtra).toFixed(2) + 's';
            document.getElementById('ads180Time').textContent = (180 / adsYaw).toFixed(2) + 's';
            document.getElementById('ads180TimeExtra').textContent = (180 / adsYawExtra).toFixed(2) + 's';
            
            document.getElementById('hipBaseSpeed').textContent = hipYaw + '°/s';
            document.getElementById('hipMaxSpeed').textContent = hipYawExtra + '°/s';
            document.getElementById('adsBaseSpeed').textContent = adsYaw + '°/s';
            document.getElementById('adsMaxSpeed').textContent = adsYawExtra + '°/s';
        }

        // Update micro adjustment
        function updateMicroAdjustment() {
            const deadzone = parseInt(document.getElementById('deadzone').value);
            const capability = Math.max(0, 100 - deadzone * 2);
            
            document.getElementById('microBar').style.width = capability + '%';
            document.getElementById('microLabel').textContent = capability + '%';
            
            let text;
            if (deadzone === 0) {
                text = "Perfect micro-adjustments - maximum precision possible";
            } else if (deadzone < 5) {
                text = "Excellent micro-adjustments - minimal input required";
            } else if (deadzone < 15) {
                text = "Good micro-adjustments - balanced precision";
            } else {
                text = "Limited micro-adjustments - requires larger movements";
            }
            document.getElementById('microText').textContent = text;
        }

        // Update analysis
        function updateAnalysis() {
            const deadzone = parseInt(document.getElementById('deadzone').value);
            const curve = parseInt(document.getElementById('responseCurve').value);
            const hipYaw = parseInt(document.getElementById('yawSpeed').value);
            const hipPitch = parseInt(document.getElementById('pitchSpeed').value);
            const adsYaw = parseInt(document.getElementById('adsYawSpeed').value);
            const extraYaw = parseInt(document.getElementById('extraYaw').value);
            
            let analysis = "";
            
            // Deadzone analysis
            if (deadzone === 0) {
                analysis += "• Perfect deadzone: Maximum micro-adjustment capability.<br>";
            } else if (deadzone < 5) {
                analysis += "• Excellent deadzone: Great micro-adjustments with minimal input.<br>";
            } else if (deadzone < 15) {
                analysis += "• Moderate deadzone: Balanced but could benefit from lowering.<br>";
            } else {
                analysis += "• High deadzone: Limiting your micro-adjustment potential significantly.<br>";
            }
            
            // Curve analysis
            if (curve == 0) {
                analysis += "• Linear response: Maximum control for recoil and tracking. High skill ceiling.<br>";
            } else if (curve <= 5) {
                analysis += "• Mild curve: Good balance between control and forgiveness.<br>";
            } else if (curve == 10) {
                analysis += "• Classic curve: Forgiving and familiar, but less precise than linear.<br>";
            } else {
                analysis += "• Heavy curve: Very forgiving but sacrifices precision and consistency.<br>";
            }
            
            // Speed analysis
            if (hipYaw < 90) {
                analysis += "• ⚠️ CRITICAL: Hip fire too slow for close range! Increase to at least 90°/s.<br>";
            } else if (hipYaw < 130) {
                analysis += "• Hip fire speed is minimum viable. Consider increasing for better close range.<br>";
            }
            
            if (adsYaw < 45) {
                analysis += "• ⚠️ CRITICAL: ADS too slow for basic tracking! Increase to at least 45°/s.<br>";
            } else if (adsYaw < 75) {
                analysis += "• ADS speed is minimum viable. Consider increasing for better tracking.<br>";
            }
            
            const hipUniformity = calculateUniformity(hipYaw, hipPitch);
            if (hipUniformity < 70) {
                analysis += "• ⚠️ Poor diagonal uniformity! Match yaw/pitch speeds for consistent aim.<br>";
            } else if (hipUniformity < 85) {
                analysis += "• Diagonal movement may feel slightly inconsistent.<br>";
            }
            
            if (extraYaw > 100) {
                analysis += "• High turning extra enables quick 180s while maintaining low base sens.<br>";
            } else if (extraYaw === 0) {
                analysis += "• No turning extra: Consider adding some for emergency flicks.<br>";
            }
            
            const avgSpeed = (hipYaw + hipPitch) / 2;
            if (curve === 0 && deadzone < 5 && avgSpeed > 150 && hipUniformity > 85) {
                analysis += "<br><strong>🏆 Pro-level setup detected! High skill ceiling configuration.</strong>";
            } else if (curve > 15 || deadzone > 20) {
                analysis += "<br><strong>⚠️ Settings may be limiting your potential. Consider moving toward linear/low deadzone.</strong>";
            }
            
            document.getElementById('analysisText').innerHTML = analysis;
            
            updateMicroAdjustment();
            updateDiagonalUniformity();
        }

        // Visualization functions
        function applyDeadzone(x, y, deadzone, outerThreshold) {
            const magnitude = Math.sqrt(x * x + y * y);
            const deadzoneValue = deadzone / 100;
            const outerValue = outerThreshold / 100;
            
            if (magnitude < deadzoneValue) return { x: 0, y: 0, inDeadzone: true };
            
            let adjustedMagnitude = magnitude;
            if (magnitude > 1 - outerValue) {
                adjustedMagnitude = 1 - outerValue;
            }
            
            const scaled = (adjustedMagnitude - deadzoneValue) / (1 - deadzoneValue - outerValue);
            const angle = Math.atan2(y, x);
            
            return {
                x: scaled * Math.cos(angle),
                y: scaled * Math.sin(angle),
                inDeadzone: false,
                inOuter: magnitude > 1 - outerValue
            };
        }

        function applyResponseCurve(input, curveValue) {
            const absInput = Math.abs(input);
            let output;
            
            if (curveValue == 0) {
                output = absInput;
            } else if (curveValue <= 5) {
                const power = 1 + (curveValue * 0.2);
                output = Math.pow(absInput, power);
            } else if (curveValue <= 9) {
                const t = (curveValue - 5) / 4;
                const linearOutput = absInput;
                const classicOutput = Math.pow(absInput, 2.2);
                output = linearOutput * (1 - t) + classicOutput * t;
            } else if (curveValue == 10) {
                output = Math.pow(absInput, 2.2);
            } else if (curveValue < 20) {
                const power = 2.2 + (curveValue - 10) * 0.15;
                output = Math.pow(absInput, power);
            } else {
                const power = 3.7 + (curveValue - 20) * 0.25;
                output = Math.pow(absInput, power);
            }
            
            return Math.sign(input) * output;
        }

        function drawDeadzone() {
            const centerX = deadzoneCanvas.width / 2;
            const centerY = deadzoneCanvas.height / 2;
            const maxRadius = Math.min(centerX, centerY) - 20;
            
            deadzoneCtx.clearRect(0, 0, deadzoneCanvas.width, deadzoneCanvas.height);
            
            deadzoneCtx.fillStyle = '#3a3a3a';
            deadzoneCtx.fillRect(0, 0, deadzoneCanvas.width, deadzoneCanvas.height);
            
            // Outer ring
            deadzoneCtx.strokeStyle = '#666';
            deadzoneCtx.lineWidth = 3;
            deadzoneCtx.beginPath();
            deadzoneCtx.arc(centerX, centerY, maxRadius, 0, Math.PI * 2);
            deadzoneCtx.stroke();
            
            const outerThresholdRadius = maxRadius * (1 - document.getElementById('outerThreshold').value / 100);
            deadzoneCtx.fillStyle = 'rgba(255, 107, 0, 0.15)';
            deadzoneCtx.beginPath();
            deadzoneCtx.arc(centerX, centerY, maxRadius, 0, Math.PI * 2);
            deadzoneCtx.arc(centerX, centerY, outerThresholdRadius, 0, Math.PI * 2, true);
            deadzoneCtx.fill();
            
            const deadzoneRadius = maxRadius * (document.getElementById('deadzone').value / 100);
            deadzoneCtx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            deadzoneCtx.beginPath();
            deadzoneCtx.arc(centerX, centerY, outerThresholdRadius, 0, Math.PI * 2);
            deadzoneCtx.arc(centerX, centerY, deadzoneRadius, 0, Math.PI * 2, true);
            deadzoneCtx.fill();
            
            deadzoneCtx.fillStyle = 'rgba(120, 40, 40, 0.4)';
            deadzoneCtx.beginPath();
            deadzoneCtx.arc(centerX, centerY, deadzoneRadius, 0, Math.PI * 2);
            deadzoneCtx.fill();
            
            // Center crosshair
            deadzoneCtx.strokeStyle = '#ff6b00';
            deadzoneCtx.lineWidth = 2;
            deadzoneCtx.shadowBlur = 10;
            deadzoneCtx.shadowColor = '#ff6b00';
            deadzoneCtx.beginPath();
            deadzoneCtx.moveTo(centerX - 10, centerY);
            deadzoneCtx.lineTo(centerX + 10, centerY);
            deadzoneCtx.moveTo(centerX, centerY - 10);
            deadzoneCtx.lineTo(centerX, centerY + 10);
            deadzoneCtx.stroke();
            deadzoneCtx.shadowBlur = 0;
            
            const stickAngle = Date.now() / 2000;
            const stickRadius = maxRadius * 0.7;
            const stickX = Math.cos(stickAngle) * stickRadius / maxRadius;
            const stickY = Math.sin(stickAngle) * stickRadius / maxRadius;
            
            const processed = applyDeadzone(stickX, stickY, document.getElementById('deadzone').value, document.getElementById('outerThreshold').value);
            
            // Input position
            deadzoneCtx.fillStyle = '#666';
            deadzoneCtx.beginPath();
            deadzoneCtx.arc(centerX + stickX * maxRadius, centerY + stickY * maxRadius, 6, 0, Math.PI * 2);
            deadzoneCtx.fill();
            
            if (!processed.inDeadzone) {
                // Output position
                deadzoneCtx.fillStyle = '#ff6b00';
                deadzoneCtx.shadowBlur = 15;
                deadzoneCtx.shadowColor = '#ff6b00';
                deadzoneCtx.beginPath();
                deadzoneCtx.arc(centerX + processed.x * maxRadius, centerY + processed.y * maxRadius, 6, 0, Math.PI * 2);
                deadzoneCtx.fill();
                deadzoneCtx.shadowBlur = 0;
                
                // Connection line
                deadzoneCtx.strokeStyle = '#ff6b00';
                deadzoneCtx.lineWidth = 2;
                deadzoneCtx.setLineDash([5, 5]);
                deadzoneCtx.beginPath();
                deadzoneCtx.moveTo(centerX + stickX * maxRadius, centerY + stickY * maxRadius);
                deadzoneCtx.lineTo(centerX + processed.x * maxRadius, centerY + processed.y * maxRadius);
                deadzoneCtx.stroke();
                deadzoneCtx.setLineDash([]);
            }
        }

        function drawResponseCurve() {
            const width = curveCanvas.width;
            const height = curveCanvas.height;
            const padding = 30;
            const graphWidth = width - 2 * padding;
            const graphHeight = height - 2 * padding;
            
            curveCtx.clearRect(0, 0, width, height);
            
            curveCtx.fillStyle = '#3a3a3a';
            curveCtx.fillRect(0, 0, width, height);
            
            const deadzonePercent = parseInt(document.getElementById('deadzone').value) / 100;
            const outerThresholdPercent = Math.max(0.01, parseInt(document.getElementById('outerThreshold').value) / 100);
            
            // Grid
            curveCtx.strokeStyle = '#3a3a3a';
            curveCtx.lineWidth = 1;
            
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i / 10) * graphWidth;
                curveCtx.beginPath();
                curveCtx.moveTo(x, padding);
                curveCtx.lineTo(x, height - padding);
                curveCtx.stroke();
                
                const y = padding + (i / 10) * graphHeight;
                curveCtx.beginPath();
                curveCtx.moveTo(padding, y);
                curveCtx.lineTo(width - padding, y);
                curveCtx.stroke();
            }
            
            // Axes
            curveCtx.strokeStyle = '#666';
            curveCtx.lineWidth = 2;
            curveCtx.beginPath();
            curveCtx.moveTo(padding, height - padding);
            curveCtx.lineTo(width - padding, height - padding);
            curveCtx.moveTo(padding, padding);
            curveCtx.lineTo(padding, height - padding);
            curveCtx.stroke();
            
            // Linear reference
            curveCtx.strokeStyle = '#444';
            curveCtx.lineWidth = 1;
            curveCtx.setLineDash([5, 5]);
            curveCtx.beginPath();
            curveCtx.moveTo(padding, height - padding);
            curveCtx.lineTo(width - padding, padding);
            curveCtx.stroke();
            curveCtx.setLineDash([]);
            
            // Deadzone area
            if (deadzonePercent > 0) {
                curveCtx.fillStyle = 'rgba(120, 40, 40, 0.2)';
                curveCtx.fillRect(padding, padding, deadzonePercent * graphWidth, graphHeight);
            }
            
            // Outer threshold area
            curveCtx.fillStyle = 'rgba(255, 107, 0, 0.1)';
            curveCtx.fillRect(
                padding + (1 - outerThresholdPercent) * graphWidth, 
                padding, 
                outerThresholdPercent * graphWidth, 
                graphHeight
            );
            
            // Response curve
            curveCtx.strokeStyle = '#ff6b00';
            curveCtx.lineWidth = 3;
            curveCtx.shadowBlur = 10;
            curveCtx.shadowColor = '#ff6b00';
            curveCtx.beginPath();
            
            for (let i = 0; i <= 100; i++) {
                const rawInput = i / 100;
                let x = padding + rawInput * graphWidth;
                let y = height - padding;
                
                if (rawInput <= deadzonePercent) {
                    y = height - padding;
                } else if (rawInput >= 1 - outerThresholdPercent) {
                    y = padding;
                } else {
                    const normalizedInput = (rawInput - deadzonePercent) / (1 - deadzonePercent - outerThresholdPercent);
                    const curvedOutput = applyResponseCurve(normalizedInput, document.getElementById('responseCurve').value);
                    y = height - padding - curvedOutput * graphHeight;
                }
                
                if (i === 0) {
                    curveCtx.moveTo(x, y);
                } else {
                    curveCtx.lineTo(x, y);
                }
            }
            
            curveCtx.stroke();
            curveCtx.shadowBlur = 0;
            
            // Labels
            curveCtx.fillStyle = '#999';
            curveCtx.font = '12px Arial';
            curveCtx.textAlign = 'center';
            curveCtx.fillText('Input', width / 2, height - 5);
            curveCtx.save();
            curveCtx.translate(10, height / 2);
            curveCtx.rotate(-Math.PI / 2);
            curveCtx.fillText('Output', 0, 0);
            curveCtx.restore();
        }

        function drawStrafeTracking() {
            const width = strafeCanvas.width;
            const height = strafeCanvas.height;
            const padding = 40;
            const graphWidth = width - 2 * padding;
            const graphHeight = height - 2 * padding;
            
            strafeCtx.clearRect(0, 0, width, height);
            
            strafeCtx.fillStyle = '#3a3a3a';
            strafeCtx.fillRect(0, 0, width, height);
            
            const hipYaw = parseInt(document.getElementById('yawSpeed').value);
            const adsYaw = parseInt(document.getElementById('adsYawSpeed').value);
            
            const maxDistance = 50;
            const maxSpeed = 200;
            
            // Grid
            strafeCtx.strokeStyle = '#3a3a3a';
            strafeCtx.lineWidth = 1;
            
            const distances = [3, 10, 20, 30, 40, 50];
            distances.forEach(dist => {
                const x = padding + (dist / maxDistance) * graphWidth;
                strafeCtx.beginPath();
                strafeCtx.moveTo(x, padding);
                strafeCtx.lineTo(x, height - padding);
                strafeCtx.stroke();
                
                strafeCtx.fillStyle = '#666';
                strafeCtx.font = '10px Arial';
                strafeCtx.textAlign = 'center';
                strafeCtx.fillText(dist + 'm', x, height - padding + 15);
            });
            
            const speeds = [0, 25, 50, 75, 100, 125, 150, 175, 200];
            speeds.forEach(speed => {
                const y = height - padding - (speed / maxSpeed) * graphHeight;
                strafeCtx.beginPath();
                strafeCtx.moveTo(padding, y);
                strafeCtx.lineTo(width - padding, y);
                strafeCtx.stroke();
                
                strafeCtx.fillStyle = '#666';
                strafeCtx.font = '10px Arial';
                strafeCtx.textAlign = 'right';
                strafeCtx.fillText(speed + '°/s', padding - 5, y + 3);
            });
            
            // Fill zones with themed colors
            strafeCtx.fillStyle = 'rgba(255, 255, 255, 0.05)';
            strafeCtx.beginPath();
            strafeCtx.moveTo(padding, padding);
            strafeCtx.lineTo(width - padding, padding);
            
            for (let x = width - padding; x >= padding; x--) {
                const dist = ((x - padding) / graphWidth) * maxDistance;
                if (dist < 3) continue;
                const requiredSpeed = 90 * (3 / dist);
                const y = height - padding - (Math.min(requiredSpeed, maxSpeed) / maxSpeed) * graphHeight;
                strafeCtx.lineTo(x, y);
            }
            
            strafeCtx.closePath();
            strafeCtx.fill();
            
            strafeCtx.fillStyle = 'rgba(120, 40, 40, 0.15)';
            strafeCtx.beginPath();
            
            strafeCtx.moveTo(padding, height - padding);
            
            for (let x = padding; x <= width - padding; x++) {
                const dist = ((x - padding) / graphWidth) * maxDistance;
                if (dist < 3) {
                    strafeCtx.lineTo(x, padding);
                } else {
                    const requiredSpeed = 90 * (3 / dist);
                    const y = height - padding - (Math.min(requiredSpeed, maxSpeed) / maxSpeed) * graphHeight;
                    strafeCtx.lineTo(x, y);
                }
            }
            
            strafeCtx.lineTo(width - padding, height - padding);
            strafeCtx.closePath();
            strafeCtx.fill();
            
            // Draw required speed curves
            strafeCtx.strokeStyle = '#ff6b00';
            strafeCtx.lineWidth = 3;
            strafeCtx.beginPath();
            
            for (let x = padding; x <= width - padding; x++) {
                const dist = ((x - padding) / graphWidth) * maxDistance;
                if (dist < 3) continue;
                const requiredSpeed = 90 * (3 / dist);
                const y = height - padding - (Math.min(requiredSpeed, maxSpeed) / maxSpeed) * graphHeight;
                
                if (x === padding || dist === 3) {
                    strafeCtx.moveTo(x, y);
                } else {
                    strafeCtx.lineTo(x, y);
                }
            }
            strafeCtx.stroke();
            
            strafeCtx.strokeStyle = '#888';
            strafeCtx.lineWidth = 2;
            strafeCtx.beginPath();
            
            for (let x = padding; x <= width - padding; x++) {
                const dist = ((x - padding) / graphWidth) * maxDistance;
                if (dist < 3) continue;
                const requiredSpeed = 45 * (3 / dist);
                const y = height - padding - (Math.min(requiredSpeed, maxSpeed) / maxSpeed) * graphHeight;
                
                if (x === padding || dist === 3) {
                    strafeCtx.moveTo(x, y);
                } else {
                    strafeCtx.lineTo(x, y);
                }
            }
            strafeCtx.stroke();
            
            // User speed lines
            const hipY = height - padding - (hipYaw / maxSpeed) * graphHeight;
            strafeCtx.strokeStyle = '#fff';
            strafeCtx.lineWidth = 3;
            strafeCtx.setLineDash([10, 5]);
            strafeCtx.beginPath();
            strafeCtx.moveTo(padding, hipY);
            strafeCtx.lineTo(width - padding, hipY);
            strafeCtx.stroke();
            
            const adsY = height - padding - (adsYaw / maxSpeed) * graphHeight;
            strafeCtx.strokeStyle = '#999';
            strafeCtx.lineWidth = 2;
            strafeCtx.setLineDash([5, 5]);
            strafeCtx.beginPath();
            strafeCtx.moveTo(padding, adsY);
            strafeCtx.lineTo(width - padding, adsY);
            strafeCtx.stroke();
            strafeCtx.setLineDash([]);
            
            // Labels
            strafeCtx.font = '11px Arial';
            strafeCtx.fillStyle = '#fff';
            strafeCtx.textAlign = 'left';
            strafeCtx.fillText(`Your Hip Fire: ${hipYaw}°/s`, padding + 10, hipY - 5);
            
            strafeCtx.fillStyle = '#999';
            strafeCtx.fillText(`Your ADS: ${adsYaw}°/s`, padding + 10, adsY + 12);
            
            // Axes
            strafeCtx.strokeStyle = '#666';
            strafeCtx.lineWidth = 2;
            strafeCtx.beginPath();
            strafeCtx.moveTo(padding, height - padding);
            strafeCtx.lineTo(width - padding, height - padding);
            strafeCtx.moveTo(padding, padding);
            strafeCtx.lineTo(padding, height - padding);
            strafeCtx.stroke();
            
            // Status (keeping the existing status logic)
            const hipCanTrackAt3m = hipYaw >= 90;
            const adsCanTrackAt3m = adsYaw >= 45;
            const statusBox = document.getElementById('strafeStatusBox');
            
            statusBox.style.backgroundColor = '#4a4a4a';
            statusBox.style.border = 'none';
            statusBox.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.2)';
            
            if (hipCanTrackAt3m && adsCanTrackAt3m) {
                statusBox.style.display = 'block';
                statusBox.innerHTML = '<div style="color: #ff6b00; font-size: 18px; font-weight: bold;">✓ Both Hip Fire and ADS can track at all engagement ranges!</div>';
            } else if (!hipCanTrackAt3m && !adsCanTrackAt3m) {
                const hipClosest = Math.ceil(270 / hipYaw);
                const adsClosest = Math.ceil(135 / adsYaw);
                statusBox.style.display = 'block';
                statusBox.innerHTML = `<div style="color: #ff6666; font-size: 16px; font-weight: bold;">⚠️ Hip Fire: Cannot track closer than ${hipClosest}m<br>⚠️ ADS: Cannot track closer than ${adsClosest}m</div>`;
            } else if (!hipCanTrackAt3m) {
                const hipClosest = Math.ceil(270 / hipYaw);
                statusBox.style.display = 'block';
                statusBox.innerHTML = `<div style="color: #ff6666; font-size: 16px; font-weight: bold;">⚠️ Hip Fire: Cannot track closer than ${hipClosest}m - Increase speed!</div>`;
            } else {
                const adsClosest = Math.ceil(135 / adsYaw);
                statusBox.style.display = 'block';
                statusBox.innerHTML = `<div style="color: #ff6666; font-size: 16px; font-weight: bold;">⚠️ ADS: Cannot track closer than ${adsClosest}m - Increase ADS speed!</div>`;
            }
        }

        function drawDiagonalVisualization() {
            const width = diagonalCanvas.width;
            const height = diagonalCanvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const maxRadius = Math.min(centerX, centerY) - 40;
            
            diagonalCtx.clearRect(0, 0, width, height);
            
            diagonalCtx.fillStyle = '#3a3a3a';
            diagonalCtx.fillRect(0, 0, width, height);
            
            // Grid
            diagonalCtx.strokeStyle = '#3a3a3a';
            diagonalCtx.lineWidth = 1;
            
            diagonalCtx.beginPath();
            diagonalCtx.moveTo(centerX - maxRadius, centerY);
            diagonalCtx.lineTo(centerX + maxRadius, centerY);
            diagonalCtx.moveTo(centerX, centerY - maxRadius);
            diagonalCtx.lineTo(centerX, centerY + maxRadius);
            diagonalCtx.stroke();
            
            diagonalCtx.strokeStyle = '#444';
            diagonalCtx.setLineDash([5, 5]);
            diagonalCtx.beginPath();
            const diag = maxRadius * 0.707;
            diagonalCtx.moveTo(centerX - diag, centerY - diag);
            diagonalCtx.lineTo(centerX + diag, centerY + diag);
            diagonalCtx.moveTo(centerX - diag, centerY + diag);
            diagonalCtx.lineTo(centerX + diag, centerY - diag);
            diagonalCtx.stroke();
            diagonalCtx.setLineDash([]);
            
            // Perfect circle reference
            diagonalCtx.strokeStyle = '#555';
            diagonalCtx.lineWidth = 2;
            diagonalCtx.beginPath();
            diagonalCtx.arc(centerX, centerY, maxRadius * 0.7, 0, Math.PI * 2);
            diagonalCtx.stroke();
            
            const hipYaw = parseInt(document.getElementById('yawSpeed').value);
            const hipPitch = parseInt(document.getElementById('pitchSpeed').value);
            const adsYaw = parseInt(document.getElementById('adsYawSpeed').value);
            const adsPitch = parseInt(document.getElementById('adsPitchSpeed').value);
            
            // Hip fire oval
            diagonalCtx.save();
            diagonalCtx.translate(centerX - centerX/2, centerY);
            const hipScaleX = 1;
            const hipScaleY = hipPitch / hipYaw;
            diagonalCtx.scale(hipScaleX, hipScaleY);
            diagonalCtx.strokeStyle = '#fff';
            diagonalCtx.lineWidth = 3 / Math.max(hipScaleX, hipScaleY);
            diagonalCtx.shadowBlur = 10;
            diagonalCtx.shadowColor = '#fff';
            diagonalCtx.beginPath();
            diagonalCtx.arc(0, 0, maxRadius * 0.5, 0, Math.PI * 2);
            diagonalCtx.stroke();
            diagonalCtx.restore();
            
            // ADS oval
            diagonalCtx.save();
            diagonalCtx.translate(centerX + centerX/2, centerY);
            const adsScaleX = 1;
            const adsScaleY = adsPitch / adsYaw;
            diagonalCtx.scale(adsScaleX, adsScaleY);
            diagonalCtx.strokeStyle = '#ff6b00';
            diagonalCtx.lineWidth = 3 / Math.max(adsScaleX, adsScaleY);
            diagonalCtx.shadowBlur = 10;
            diagonalCtx.shadowColor = '#ff6b00';
            diagonalCtx.beginPath();
            diagonalCtx.arc(0, 0, maxRadius * 0.5, 0, Math.PI * 2);
            diagonalCtx.stroke();
            diagonalCtx.restore();
            
            diagonalCtx.shadowBlur = 0;
            
            // Labels
            diagonalCtx.fillStyle = '#999';
            diagonalCtx.font = '12px Arial';
            diagonalCtx.textAlign = 'center';
            diagonalCtx.fillText('Hip Fire', centerX - centerX/2, height - 20);
            diagonalCtx.fillText('ADS', centerX + centerX/2, height - 20);
            
            diagonalCtx.fillStyle = '#666';
            diagonalCtx.fillText('Perfect Circle Reference', centerX, 20);
        }

        function drawAimAssist() {
            const width = aimAssistCanvas.width;
            const height = aimAssistCanvas.height;
            const padding = 40;
            const graphWidth = width - 2 * padding;
            const graphHeight = height - 2 * padding;
            
            aimAssistCtx.clearRect(0, 0, width, height);
            
            aimAssistCtx.fillStyle = '#3a3a3a';
            aimAssistCtx.fillRect(0, 0, width, height);
            
            aimAssistCtx.strokeStyle = '#3a3a3a';
            aimAssistCtx.lineWidth = 1;
            
            if (aaViewMode === 'hipfire') {
                const distances = [0, 3, 10, 20, 33, 40];
                distances.forEach((dist) => {
                    const x = padding + (dist / 40) * graphWidth;
                    aimAssistCtx.beginPath();
                    aimAssistCtx.moveTo(x, padding);
                    aimAssistCtx.lineTo(x, height - padding);
                    aimAssistCtx.stroke();
                    
                    aimAssistCtx.fillStyle = '#666';
                    aimAssistCtx.font = '10px Arial';
                    aimAssistCtx.textAlign = 'center';
                    aimAssistCtx.fillText(dist + 'm', x, height - padding + 15);
                });
                
                // No-AA zones
                aimAssistCtx.fillStyle = 'rgba(120, 40, 40, 0.15)';
                aimAssistCtx.fillRect(padding, padding, (3/40) * graphWidth, graphHeight);
                aimAssistCtx.fillRect(padding + (33/40) * graphWidth, padding, (7/40) * graphWidth, graphHeight);
                
                // AA active zone
                aimAssistCtx.fillStyle = 'rgba(255, 255, 255, 0.05)';
                aimAssistCtx.fillRect(padding + (3/40) * graphWidth, padding, (30/40) * graphWidth, graphHeight);
                
                // AA strength line
                aimAssistCtx.strokeStyle = '#ff6b00';
                aimAssistCtx.lineWidth = 3;
                aimAssistCtx.shadowBlur = 10;
                aimAssistCtx.shadowColor = '#ff6b00';
                aimAssistCtx.beginPath();
                
                for (let i = 0; i <= 40; i++) {
                    const distance = i;
                    let aaStrength = 0;
                    
                    if (distance >= 3 && distance <= 33) {
                        aaStrength = 0.3;
                    }
                    
                    const x = padding + (distance / 40) * graphWidth;
                    const y = height - padding - (aaStrength / 0.3 * graphHeight * 0.8);
                    
                    if (i === 0) {
                        aimAssistCtx.moveTo(x, y);
                    } else {
                        aimAssistCtx.lineTo(x, y);
                    }
                }
                
                aimAssistCtx.stroke();
                aimAssistCtx.shadowBlur = 0;
                
                // Bubble size curve
                aimAssistCtx.strokeStyle = '#999';
                aimAssistCtx.lineWidth = 2;
                aimAssistCtx.beginPath();
                
                for (let i = 0; i <= 40; i++) {
                    const distance = i;
                    let bubbleSize = 0;
                    
                    if (distance >= 3 && distance <= 33) {
                        bubbleSize = 1 - (distance - 3) / 30 * 0.7;
                    }
                    
                    const x = padding + (distance / 40) * graphWidth;
                    const y = height - padding - (bubbleSize * graphHeight * 0.8);
                    
                    if (i === 0) {
                        aimAssistCtx.moveTo(x, y);
                    } else {
                        aimAssistCtx.lineTo(x, y);
                    }
                }
                
                aimAssistCtx.stroke();
                
            } else {
                // ADS view
                const distances = [0, 10, 25, 50, 75, 100];
                distances.forEach((dist) => {
                    const x = padding + (dist / 100) * graphWidth;
                    aimAssistCtx.beginPath();
                    aimAssistCtx.moveTo(x, padding);
                    aimAssistCtx.lineTo(x, height - padding);
                    aimAssistCtx.stroke();
                    
                    aimAssistCtx.fillStyle = '#666';
                    aimAssistCtx.font = '10px Arial';
                    aimAssistCtx.textAlign = 'center';
                    aimAssistCtx.fillText(dist + 'm', x, height - padding + 15);
                });
                
                // AA strength line
                aimAssistCtx.strokeStyle = '#ff6b00';
                aimAssistCtx.lineWidth = 3;
                aimAssistCtx.shadowBlur = 10;
                aimAssistCtx.shadowColor = '#ff6b00';
                aimAssistCtx.beginPath();
                aimAssistCtx.moveTo(padding, height - padding - 0.3 * graphHeight * 0.8);
                aimAssistCtx.lineTo(width - padding, height - padding - 0.3 * graphHeight * 0.8);
                aimAssistCtx.stroke();
                aimAssistCtx.shadowBlur = 0;
                
                // Bubble size curve
                aimAssistCtx.strokeStyle = '#999';
                aimAssistCtx.lineWidth = 2;
                aimAssistCtx.beginPath();
                
                for (let i = 0; i <= 100; i++) {
                    const distance = i;
                    const bubbleSize = Math.exp(-distance / 30);
                    
                    const x = padding + (distance / 100) * graphWidth;
                    const y = height - padding - (bubbleSize * graphHeight * 0.8);
                    
                    if (i === 0) {
                        aimAssistCtx.moveTo(x, y);
                    } else {
                        aimAssistCtx.lineTo(x, y);
                    }
                }
                
                aimAssistCtx.stroke();
                
                // Practical limit zone
                aimAssistCtx.fillStyle = 'rgba(120, 40, 40, 0.1)';
                aimAssistCtx.fillRect(padding + (50/100) * graphWidth, padding, (50/100) * graphWidth, graphHeight);
                
                aimAssistCtx.fillStyle = '#666';
                aimAssistCtx.font = '12px Arial';
                aimAssistCtx.textAlign = 'center';
                aimAssistCtx.fillText('Practical Limit', padding + (75/100) * graphWidth, padding + 20);
            }
            
            // Axes
            aimAssistCtx.strokeStyle = '#666';
            aimAssistCtx.lineWidth = 2;
            aimAssistCtx.beginPath();
            aimAssistCtx.moveTo(padding, height - padding);
            aimAssistCtx.lineTo(width - padding, height - padding);
            aimAssistCtx.moveTo(padding, padding);
            aimAssistCtx.lineTo(padding, height - padding);
            aimAssistCtx.stroke();
            
            aimAssistCtx.fillStyle = '#999';
            aimAssistCtx.font = '12px Arial';
            aimAssistCtx.textAlign = 'center';
            aimAssistCtx.fillText('Distance (meters)', width / 2, height - 5);
            
            // Legend
            aimAssistCtx.font = '11px Arial';
            aimAssistCtx.textAlign = 'left';
            
            aimAssistCtx.fillStyle = '#ff6b00';
            aimAssistCtx.fillText('AA Strength (30%)', width - 130, 20);
            
            aimAssistCtx.fillStyle = '#999';
            aimAssistCtx.fillText('Bubble Size', width - 130, 35);
        }

        function drawSpeedComparison() {
            const width = speedComparisonCanvas.width;
            const height = speedComparisonCanvas.height;
            const padding = 40;
            const graphWidth = width - 2 * padding;
            const graphHeight = height - 2 * padding;
            
            speedComparisonCtx.clearRect(0, 0, width, height);
            
            speedComparisonCtx.fillStyle = '#3a3a3a';
            speedComparisonCtx.fillRect(0, 0, width, height);
            
            const hipBase = parseInt(document.getElementById('yawSpeed').value);
            const hipMax = parseInt(document.getElementById('yawSpeed').value) + parseInt(document.getElementById('extraYaw').value);
            const adsBase = parseInt(document.getElementById('adsYawSpeed').value);
            const adsMax = parseInt(document.getElementById('adsYawSpeed').value) + parseInt(document.getElementById('adsExtraYaw').value);
            
            const maxSpeed = Math.max(hipBase, hipMax, adsBase, adsMax);
            const scale = graphHeight / (maxSpeed * 1.1);
            
            // Grid
            speedComparisonCtx.strokeStyle = '#3a3a3a';
            speedComparisonCtx.lineWidth = 1;
            
            for (let i = 0; i <= 5; i++) {
                const y = padding + (i / 5) * graphHeight;
                speedComparisonCtx.beginPath();
                speedComparisonCtx.moveTo(padding, y);
                speedComparisonCtx.lineTo(width - padding, y);
                speedComparisonCtx.stroke();
                
                const speed = Math.round((1 - i / 5) * maxSpeed * 1.1);
                speedComparisonCtx.fillStyle = '#666';
                speedComparisonCtx.font = '10px Arial';
                speedComparisonCtx.textAlign = 'right';
                speedComparisonCtx.fillText(speed + '°/s', padding - 5, y + 3);
            }
            
            const barWidth = graphWidth / 8;
            const barSpacing = graphWidth / 4;
            
            const bars = [
                { label: 'Hip Base', value: hipBase, color: '#666', x: padding + barSpacing - barWidth * 1.5 },
                { label: 'Hip Max', value: hipMax, color: '#fff', x: padding + barSpacing - barWidth * 0.5 },
                { label: 'ADS Base', value: adsBase, color: '#666', x: padding + barSpacing * 3 - barWidth * 1.5 },
                { label: 'ADS Max', value: adsMax, color: '#ff6b00', x: padding + barSpacing * 3 - barWidth * 0.5 }
            ];
            
            bars.forEach(bar => {
                const barHeight = bar.value * scale;
                
                // Bar with gradient
                const gradient = speedComparisonCtx.createLinearGradient(0, height - padding - barHeight, 0, height - padding);
                gradient.addColorStop(0, bar.color);
                gradient.addColorStop(1, '#3a3a3a');
                
                speedComparisonCtx.fillStyle = gradient;
                speedComparisonCtx.fillRect(bar.x, height - padding - barHeight, barWidth, barHeight);
                
                // Border
                speedComparisonCtx.strokeStyle = bar.color;
                speedComparisonCtx.lineWidth = 2;
                speedComparisonCtx.strokeRect(bar.x, height - padding - barHeight, barWidth, barHeight);
                
                // Value label
                speedComparisonCtx.fillStyle = bar.color;
                speedComparisonCtx.font = '11px Arial';
                speedComparisonCtx.textAlign = 'center';
                speedComparisonCtx.fillText(bar.value + '°/s', bar.x + barWidth / 2, height - padding - barHeight - 5);
                
                // Bar label
                speedComparisonCtx.fillStyle = '#999';
                speedComparisonCtx.fillText(bar.label, bar.x + barWidth / 2, height - padding + 15);
            });
            
            // Axes
            speedComparisonCtx.strokeStyle = '#666';
            speedComparisonCtx.lineWidth = 2;
            speedComparisonCtx.beginPath();
            speedComparisonCtx.moveTo(padding, height - padding);
            speedComparisonCtx.lineTo(width - padding, height - padding);
            speedComparisonCtx.moveTo(padding, padding);
            speedComparisonCtx.lineTo(padding, height - padding);
            speedComparisonCtx.stroke();
        }

        function updateVisualizations() {
            drawResponseCurve();
            drawStrafeTracking();
            drawDiagonalVisualization();
            drawAimAssist();
            drawSpeedComparison();
        }

        function animate() {
            drawDeadzone();
            requestAnimationFrame(animate);
        }

        // Reset settings
        function resetSettings() {
            const defaultSettings = presets.default;
            Object.keys(defaultSettings).forEach(key => {
                const slider = document.getElementById(key);
                if (slider) {
                    slider.value = defaultSettings[key];
                    updateSlider(key);
                }
            });
            document.getElementById('presets').value = 'default';
            updateWarnings();
            updateVisualizations();
            updateAnalysis();
            updateStats();
        }

        // Export settings
        function exportSettings() {
            const currentSettings = {};
            settings.forEach(setting => {
                const slider = document.getElementById(setting);
                if (slider) {
                    currentSettings[setting] = slider.value;
                }
            });
            
            const text = `Apex Legends ALC Settings:
==================
HIP FIRE:
Deadzone: ${currentSettings.deadzone}%
Outer Threshold: ${currentSettings.outerThreshold}%
Response Curve: ${currentSettings.responseCurve}
Yaw Speed: ${currentSettings.yawSpeed}
Pitch Speed: ${currentSettings.pitchSpeed}
Turning Extra Yaw: ${currentSettings.extraYaw}
Turning Extra Pitch: ${currentSettings.extraPitch}
Ramp-up Time: ${currentSettings.rampTime}%
Ramp-up Delay: ${currentSettings.rampDelay}%

ADS:
ADS Yaw Speed: ${currentSettings.adsYawSpeed}
ADS Pitch Speed: ${currentSettings.adsPitchSpeed}
ADS Turning Extra Yaw: ${currentSettings.adsExtraYaw}
ADS Turning Extra Pitch: ${currentSettings.adsExtraPitch}
ADS Ramp-up Time: ${currentSettings.adsRampTime}%
ADS Ramp-up Delay: ${currentSettings.adsRampDelay}%`;
            
            navigator.clipboard.writeText(text).then(() => {
                alert('Settings copied to clipboard!');
            }).catch(() => {
                alert(text);
            });
        }

        // Import settings
        function importSettings() {
            const input = prompt('Paste your settings string here:');
            if (input) {
                try {
                    const lines = input.split('\n');
                    lines.forEach(line => {
                        const match = line.match(/^(.*?):\s*(\d+)%?$/);
                        if (match) {
                            const key = match[1].trim().toLowerCase().replace(/ /g, '');
                            const value = match[2];
                            
                            const mapping = {
                                'deadzone': 'deadzone',
                                'outerthreshold': 'outerThreshold',
                                'responsecurve': 'responseCurve',
                                'yawspeed': 'yawSpeed',
                                'pitchspeed': 'pitchSpeed',
                                'turningextrayaw': 'extraYaw',
                                'turningextrapitch': 'extraPitch',
                                'ramp-uptime': 'rampTime',
                                'ramp-updelay': 'rampDelay',
                                'adsyawspeed': 'adsYawSpeed',
                                'adspitchspeed': 'adsPitchSpeed',
                                'adsturningextrayaw': 'adsExtraYaw',
                                'adsturningextrapitch': 'adsExtraPitch',
                                'adsramp-uptime': 'adsRampTime',
                                'adsramp-updelay': 'adsRampDelay'
                            };
                            
                            Object.keys(mapping).forEach(textKey => {
                                if (key.includes(textKey)) {
                                    const elementId = mapping[textKey];
                                    const slider = document.getElementById(elementId);
                                    if (slider) {
                                        slider.value = value;
                                        updateSlider(elementId);
                                    }
                                }
                            });
                        }
                    });
                    
                    document.getElementById('presets').value = 'custom';
                    updateWarnings();
                    updateVisualizations();
                    updateAnalysis();
                    updateStats();
                    alert('Settings imported successfully!');
                } catch (e) {
                    alert('Failed to import settings. Please check the format.');
                }
            }
        }

        // Initialize
        updateWarnings();
        updateVisualizations();
        updateAnalysis();
        updateStats();
        animate();
    </script>
</body>
</html>
